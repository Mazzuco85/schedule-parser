<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Schedule Parser</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
  <meta name="theme-color" content="#0b1220" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div style="font-size:28px">üóìÔ∏è</div>
      <div>
        <div class="title">Schedule Parser</div>
        <div class="subtitle">Upload a monthly schedule PDF and pick a date</div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <div class="row">
        <label class="file">
          <input id="pdfInput" type="file" accept="application/pdf" />
          <span class="btn">Upload PDF</span>
          <span id="fileName" class="muted">No file selected</span>
        </label>
      </div>

      <div class="row">
        <div class="field">
          <label for="monthSel">Month</label>
          <select id="monthSel">
            <option value="1">Jan</option><option value="2">Feb</option><option value="3">Mar</option><option value="4">Apr</option>
            <option value="5">May</option><option value="6">Jun</option><option value="7">Jul</option><option value="8">Aug</option>
            <option value="9">Sep</option><option value="10">Oct</option><option value="11">Nov</option><option value="12">Dec</option>
          </select>
        </div>
        <div class="field">
          <label for="yearInput">Year</label>
          <input id="yearInput" type="number" min="2000" max="2100" value="2026" />
        </div>
        <div class="field">
          <label for="dayInput">Day</label>
          <input id="dayInput" type="number" min="1" max="31" value="1" />
        </div>
        <button id="runBtn" class="btn primary" disabled>Get staff</button>
      </div>

      <div class="row"><div class="muted">Tap a name to see off-days calendar + copy button.</div></div>
    </section>

    <section id="status" class="status" aria-live="polite"></section>

    <section id="results" class="results hidden">
      <div class="cards3">
        <div class="miniCard">
          <div class="miniHead"><div>‚úîÔ∏è Working</div><div class="count" id="countWorking">0</div></div>
          <button id="copyWorkingAll" class="btn small">Copy all working names</button>
        </div>
        <div class="miniCard">
          <div class="miniHead"><div>üü° Off</div><div class="count" id="countOff">0</div></div>
        </div>
        <div class="miniCard">
          <div class="miniHead"><div>üî¥ Medical/Absent</div><div class="count" id="countAbsent">0</div></div>
        </div>
      </div>
      <div id="byShift" class="byShift"></div>
    </section>
  </main>

  <dialog id="empDialog" class="dialog">
    <form method="dialog" class="dialogInner">
      <div class="dialogTop">
        <div>
          <div id="empName" class="dialogTitle"></div>
          <div id="empMeta" class="dialogMeta"></div>
        </div>
        <button class="btn small" value="close">Close</button>
      </div>

      <div class="dialogBody">
        <div class="calWrap">
          <div class="calHeader"><div id="calLabel" class="calLabel"></div></div>
          <div id="calGrid" class="calGrid"></div>
        </div>

        <div class="offDaysBox">
          <div class="offTitle">Off days</div>
          <div class="offRow"><div id="offDaysText" class="mono"></div></div>
          <div class="offRow">
            <button id="copyOffDays" class="btn small" type="button">Copy off days</button>
            <label class="toggle"><input id="offFormat" type="checkbox" /><span>One per line</span></label>
          </div>
        </div>
      </div>
    </form>
  </dialog>

  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.min.js" crossorigin="anonymous"></script>
  <script>pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.worker.min.js";</script>
  <script src="app.js"></script>
</body>
</html>
