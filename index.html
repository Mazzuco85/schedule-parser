<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Schedule Parser</title>
  <meta name="theme-color" content="#0b1220">
</head>
<body style="background:#0b1220;color:#e8eeff;font-family:-apple-system,system-ui;padding:16px">

<h2>Schedule Parser</h2>

<p>Cole abaixo o texto da escala mensal (copiado do PDF):</p>

<textarea id="input" rows="10" style="width:100%;padding:10px"></textarea>

<p>Dia do mÃªs:</p>
<input id="day" type="number" min="1" max="31" value="1">

<br><br>
<button onclick="run()">Processar</button>
<button onclick="copyWorking()">Copiar trabalhando</button>

<h3>ðŸŸ¢ Trabalhando</h3>
<pre id="working"></pre>

<h3>ðŸŸ¡ Folga</h3>
<pre id="off"></pre>

<h3>ðŸ”´ Dispensa mÃ©dica</h3>
<pre id="medical"></pre>

<script>
function run(){
  const text = document.getElementById("input").value;
  const day = document.getElementById("day").value;

  const working = [];
  const off = [];
  const medical = [];

  const OFF = ["FG","FA","FF","FC"];
  const MED = ["DM","AJ","EMT"];

  const lines = text.split("\\n");

  for(const line of lines){
    if(!line.trim()) continue;

    if(line.includes(day)){
      if(OFF.some(c => line.includes(c))){
        off.push(line);
      } else if(MED.some(c => line.includes(c))){
        medical.push(line);
      } else {
        working.push(line);
      }
    }
  }

  document.getElementById("working").textContent = working.join("\\n");
  document.getElementById("off").textContent = off.join("\\n");
  document.getElementById("medical").textContent = medical.join("\\n");
}

function copyWorking(){
  const text = document.getElementById("working").textContent;
  if(!text){
    alert("Nada para copiar");
    return;
  }
  navigator.clipboard.writeText(text);
  alert("Copiado!");
}
</script>

</body>
</html>
